{"ast":null,"code":"import _slicedToArray from \"C:/Users/scarleti/Desktop/Cyril/React/Kjell/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\Kjell\\\\src\\\\particles.js\",\n    _this = this;\n\n/*\r\nAuto-generated by: https://github.com/pmndrs/gltfjsx\r\n*/\nimport React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { useLoader, useFrame, useThree } from 'react-three-fiber';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport * as THREE from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var Particles = function Particles() {\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  function Swarm(_ref) {\n    _s();\n\n    var count = _ref.count;\n    var speedRef = useRef();\n    var speedObject = new THREE.Object3D();\n\n    var _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        speedOn = _useState2[0],\n        setSpeedOn = _useState2[1];\n\n    useEffect(function () {\n      var timer = setTimeout(function () {\n        setSpeedOn(false);\n      }, 6000);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }, []);\n    var treeRef = useRef();\n    var treeDummy = useMemo(function () {\n      return new THREE.Object3D();\n    }, []);\n\n    var _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        treeOn = _useState4[0],\n        setTreeOn = _useState4[1]; // Generate some random positions, speed factors and timings\n\n\n    var treeParticles = useMemo(function () {\n      var temp = [];\n\n      for (var i = 0; i < count; i++) {\n        var t = Math.random() * 100;\n        var factor = 2 + Math.random() * 2;\n        var speed = 0.1 + Math.random() / 3;\n        var xFactor = 1 - Math.random() * 9;\n        var yFactor = 1 + Math.random() * 5;\n        var zFactor = -15 + Math.random() * 1.5;\n        temp.push({\n          t: t,\n          factor: factor,\n          speed: speed,\n          xFactor: xFactor,\n          yFactor: yFactor,\n          zFactor: zFactor\n        });\n      }\n\n      return temp;\n    }, [count]);\n    useEffect(function () {\n      var timer = setTimeout(function () {\n        setTreeOn(true);\n      }, 7000);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }, []);\n    var shockwaveRef = useRef();\n    var shockwaveObject = new THREE.Object3D({\n      position: [0, 2, 0],\n      scale: [0.2, 0.2, 0.2]\n    });\n\n    var _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        shockwaveOn = _useState6[0],\n        setShockwaveOn = _useState6[1];\n    /*\r\n    useEffect(() => {\r\n      const timer = setTimeout(() => {\r\n        setShockwaveOn(true);\r\n      }, 16000);\r\n      return () => clearTimeout(timer);\r\n    }, []); */\n\n\n    useFrame(function (state) {\n      var time = state.clock.getElapsedTime();\n\n      if (speedOn) {\n        for (var x = 0; x < 100; x++) {\n          var id = x;\n          speedObject.position.set(speedObject.position.x + 2, speedObject.position.y + 0.15, speedObject.position.z + 2);\n\n          if (speedObject.position.z > 50 && time < 5.5) {\n            speedObject.position.set(-220 + Math.random() * 40, 2 - Math.random() * 20, -220 + Math.random() * 40);\n            var ranDirection = 50 - Math.random() * 100;\n            speedObject.lookAt(new THREE.Vector3(state.camera.position.x + ranDirection, state.camera.position.y, state.camera.position.z + ranDirection));\n          }\n\n          speedObject.updateMatrix();\n          speedRef.current.setMatrixAt(id, speedObject.matrix);\n        }\n\n        if (time > 6000) {\n          speedRef.current.instanceMatrix.needsUpdate = false;\n          setSpeedOn(false);\n        } else {\n          speedRef.current.instanceMatrix.needsUpdate = true;\n        }\n      }\n\n      if (treeOn) {\n        // Run through the randomized data to calculate some movement\n        treeParticles.forEach(function (particle, i) {\n          var t = particle.t,\n              factor = particle.factor,\n              speed = particle.speed,\n              xFactor = particle.xFactor,\n              yFactor = particle.yFactor,\n              zFactor = particle.zFactor;\n          t = particle.t += speed / 2;\n          treeDummy.position.set(xFactor + speed / 3 * t + Math.cos(t / factor), yFactor - speed / 3 * t, zFactor + t * factor / 3);\n\n          if (treeDummy.position.y < 0) {\n            particle.t = 0;\n          }\n\n          treeDummy.updateMatrix();\n          treeRef.current.setMatrixAt(i, treeDummy.matrix);\n        });\n        treeRef.current.instanceMatrix.needsUpdate = true;\n      }\n\n      if (shockwaveOn) {\n        var newScale = shockwaveObject.scale.x * 1.1;\n        shockwaveObject.scale.set(newScale, newScale, newScale);\n\n        if (shockwaveObject.scale.x > 2) {\n          shockwaveRef.current.instanceMatrix.needsUpdate = false;\n          setShockwaveOn(false);\n        } else {\n          shockwaveObject.updateMatrix();\n          shockwaveRef.current.setMatrixAt(1, shockwaveObject.matrix);\n          shockwaveRef.current.instanceMatrix.needsUpdate = true;\n        }\n      }\n    });\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [speedOn && /*#__PURE__*/_jsxDEV(\"instancedMesh\", {\n        ref: speedRef,\n        args: [null, null, 100],\n        children: [/*#__PURE__*/_jsxDEV(\"boxBufferGeometry\", {\n          attach: \"geometry\",\n          args: [0.1, 0.1, 50]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meshBasicMaterial\", {\n          attach: \"material\",\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this), treeOn && /*#__PURE__*/_jsxDEV(\"instancedMesh\", {\n        ref: treeRef,\n        args: [null, null, count],\n        children: [/*#__PURE__*/_jsxDEV(\"dodecahedronBufferGeometry\", {\n          attach: \"geometry\",\n          args: [0.05, 0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"meshBasicMaterial\", {\n          attach: \"material\",\n          color: \"#ffaaaa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true);\n  }\n\n  _s(Swarm, \"sb/+yX2LOPz2A0is3KfeBhZxFAY=\", false, function () {\n    return [useFrame];\n  });\n\n  function Example() {\n    _s2();\n\n    var exampleRef = useRef();\n    var exampleObject = new THREE.Object3D({\n      position: [0, 0, 0],\n      scale: [10, 10, 10]\n    });\n    useFrame(function () {\n      for (var x = 0; x < 2; x++) {\n        exampleObject.updateMatrix();\n        exampleRef.current.setMatrixAt(x, exampleObject.matrix);\n      }\n\n      exampleRef.current.instanceMatrix.needsUpdate = true;\n    });\n    return /*#__PURE__*/_jsxDEV(\"instancedMesh\", {\n      castShadow: true,\n      ref: exampleRef,\n      args: [null, null, 2],\n      children: [/*#__PURE__*/_jsxDEV(\"boxBufferGeometry\", {\n        attach: \"geometry\",\n        args: [10, 10, 10]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"meshBasicMaterial\", {\n        attach: \"material\",\n        color: \"white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this);\n  }\n\n  _s2(Example, \"iRfQ7+0cMLhYxjy8BEZUO/jITMM=\", false, function () {\n    return [useFrame];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    dispose: null,\n    children: /*#__PURE__*/_jsxDEV(Example, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 9\n  }, _this);\n};\n/*return (\r\n    <group ref={ref} dispose={null}>\r\n      <Boxes amount={2} material=\"meshBasicMaterial\" color=\"lightpink\" />\r\n      <Swarm count={10} />\r\n      <Boxes amount={6} color=\"#575760\" />\r\n      <primitive object={nodes.Armature_Bone} />\r\n        <skinnedMesh material={materials['Material.001']} geometry={nodes.Cube.geometry} skeleton={nodes.Cube.skeleton} />\r\n    </group>\r\n  )\r\n\r\n\r\n  Kjell spoition : <group position={[1.08, -0.25, -0]} scale={[0.6, 0.6, 0.6]}>\r\n\r\n  */\n\n_c = Particles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Particles\");","map":{"version":3,"sources":["C:/Users/scarleti/Desktop/Cyril/React/Kjell/src/particles.js"],"names":["React","useState","useRef","useEffect","useMemo","useLoader","useFrame","useThree","GLTFLoader","THREE","Particles","Swarm","count","speedRef","speedObject","Object3D","speedOn","setSpeedOn","timer","setTimeout","clearTimeout","treeRef","treeDummy","treeOn","setTreeOn","treeParticles","temp","i","t","Math","random","factor","speed","xFactor","yFactor","zFactor","push","shockwaveRef","shockwaveObject","position","scale","shockwaveOn","setShockwaveOn","state","time","clock","getElapsedTime","x","id","set","y","z","ranDirection","lookAt","Vector3","camera","updateMatrix","current","setMatrixAt","matrix","instanceMatrix","needsUpdate","forEach","particle","cos","newScale","Example","exampleRef","exampleObject"],"mappings":";;;;;AAAA;AACA;AACA;AAEA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,EAA6CC,OAA7C,QAA4D,OAA5D;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,QAA9B,QAA8C,mBAA9C;AACA,SAASC,UAAT,QAA2B,uCAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;;;AAEA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAAA;AAAA;;AAE3B,WAASC,KAAT,OAA0B;AAAA;;AAAA,QAATC,KAAS,QAATA,KAAS;AAEtB,QAAMC,QAAQ,GAAGX,MAAM,EAAvB;AACA,QAAMY,WAAW,GAAG,IAAIL,KAAK,CAACM,QAAV,EAApB;;AAHsB,oBAIQd,QAAQ,CAAC,IAAD,CAJhB;AAAA;AAAA,QAIfe,OAJe;AAAA,QAINC,UAJM;;AAMtBd,IAAAA,SAAS,CAAC,YAAM;AACZ,UAAMe,KAAK,GAAGC,UAAU,CAAC,YAAM;AAC3BF,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAFuB,EAErB,IAFqB,CAAxB;AAGA,aAAO;AAAA,eAAMG,YAAY,CAACF,KAAD,CAAlB;AAAA,OAAP;AACH,KALQ,EAKN,EALM,CAAT;AAOA,QAAMG,OAAO,GAAGnB,MAAM,EAAtB;AACA,QAAMoB,SAAS,GAAGlB,OAAO,CAAC;AAAA,aAAM,IAAIK,KAAK,CAACM,QAAV,EAAN;AAAA,KAAD,EAA6B,EAA7B,CAAzB;;AAdsB,qBAeMd,QAAQ,CAAC,KAAD,CAfd;AAAA;AAAA,QAefsB,MAfe;AAAA,QAePC,SAfO,kBAgBtB;;;AACA,QAAMC,aAAa,GAAGrB,OAAO,CAAC,YAAM;AAChC,UAAMsB,IAAI,GAAG,EAAb;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,KAApB,EAA2Be,CAAC,EAA5B,EAAgC;AAC5B,YAAMC,CAAC,GAAGC,IAAI,CAACC,MAAL,KAAgB,GAA1B;AACA,YAAMC,MAAM,GAAG,IAAIF,IAAI,CAACC,MAAL,KAAgB,CAAnC;AACA,YAAME,KAAK,GAAG,MAAMH,IAAI,CAACC,MAAL,KAAgB,CAApC;AACA,YAAMG,OAAO,GAAG,IAAIJ,IAAI,CAACC,MAAL,KAAgB,CAApC;AACA,YAAMI,OAAO,GAAG,IAAIL,IAAI,CAACC,MAAL,KAAgB,CAApC;AACA,YAAMK,OAAO,GAAG,CAAC,EAAD,GAAMN,IAAI,CAACC,MAAL,KAAgB,GAAtC;AACAJ,QAAAA,IAAI,CAACU,IAAL,CAAU;AAAER,UAAAA,CAAC,EAADA,CAAF;AAAKG,UAAAA,MAAM,EAANA,MAAL;AAAaC,UAAAA,KAAK,EAALA,KAAb;AAAoBC,UAAAA,OAAO,EAAPA,OAApB;AAA6BC,UAAAA,OAAO,EAAPA,OAA7B;AAAsCC,UAAAA,OAAO,EAAPA;AAAtC,SAAV;AACH;;AACD,aAAOT,IAAP;AACH,KAZ4B,EAY1B,CAACd,KAAD,CAZ0B,CAA7B;AAcAT,IAAAA,SAAS,CAAC,YAAM;AACZ,UAAMe,KAAK,GAAGC,UAAU,CAAC,YAAM;AAC3BK,QAAAA,SAAS,CAAC,IAAD,CAAT;AACH,OAFuB,EAErB,IAFqB,CAAxB;AAGA,aAAO;AAAA,eAAMJ,YAAY,CAACF,KAAD,CAAlB;AAAA,OAAP;AACH,KALQ,EAKN,EALM,CAAT;AAOA,QAAMmB,YAAY,GAAGnC,MAAM,EAA3B;AACA,QAAMoC,eAAe,GAAG,IAAI7B,KAAK,CAACM,QAAV,CAAmB;AACvCwB,MAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAD6B;AAEvCC,MAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;AAFgC,KAAnB,CAAxB;;AAvCsB,qBA2CgBvC,QAAQ,CAAC,KAAD,CA3CxB;AAAA;AAAA,QA2CfwC,WA3Ce;AAAA,QA2CFC,cA3CE;AA4CtB;AACR;AACA;AACA;AACA;AACA;AACA;;;AAEQpC,IAAAA,QAAQ,CAAC,UAAAqC,KAAK,EAAI;AAEd,UAAMC,IAAI,GAAGD,KAAK,CAACE,KAAN,CAAYC,cAAZ,EAAb;;AAEA,UAAI9B,OAAJ,EAAa;AACT,aAAK,IAAI+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC1B,cAAMC,EAAE,GAAGD,CAAX;AACAjC,UAAAA,WAAW,CAACyB,QAAZ,CAAqBU,GAArB,CACInC,WAAW,CAACyB,QAAZ,CAAqBQ,CAArB,GAAyB,CAD7B,EAEIjC,WAAW,CAACyB,QAAZ,CAAqBW,CAArB,GAAyB,IAF7B,EAGIpC,WAAW,CAACyB,QAAZ,CAAqBY,CAArB,GAAyB,CAH7B;;AAIA,cAAIrC,WAAW,CAACyB,QAAZ,CAAqBY,CAArB,GAAyB,EAAzB,IAA+BP,IAAI,GAAG,GAA1C,EAA+C;AAC3C9B,YAAAA,WAAW,CAACyB,QAAZ,CAAqBU,GAArB,CACI,CAAC,GAAD,GAAOpB,IAAI,CAACC,MAAL,KAAgB,EAD3B,EAEI,IAAID,IAAI,CAACC,MAAL,KAAgB,EAFxB,EAGI,CAAC,GAAD,GAAOD,IAAI,CAACC,MAAL,KAAgB,EAH3B;AAIA,gBAAIsB,YAAY,GAAG,KAAKvB,IAAI,CAACC,MAAL,KAAgB,GAAxC;AACAhB,YAAAA,WAAW,CAACuC,MAAZ,CACI,IAAI5C,KAAK,CAAC6C,OAAV,CACIX,KAAK,CAACY,MAAN,CAAahB,QAAb,CAAsBQ,CAAtB,GAA0BK,YAD9B,EAEIT,KAAK,CAACY,MAAN,CAAahB,QAAb,CAAsBW,CAF1B,EAGIP,KAAK,CAACY,MAAN,CAAahB,QAAb,CAAsBY,CAAtB,GAA0BC,YAH9B,CADJ;AAKH;;AACDtC,UAAAA,WAAW,CAAC0C,YAAZ;AACA3C,UAAAA,QAAQ,CAAC4C,OAAT,CAAiBC,WAAjB,CAA6BV,EAA7B,EAAiClC,WAAW,CAAC6C,MAA7C;AACH;;AACD,YAAIf,IAAI,GAAG,IAAX,EAAiB;AACb/B,UAAAA,QAAQ,CAAC4C,OAAT,CAAiBG,cAAjB,CAAgCC,WAAhC,GAA8C,KAA9C;AACA5C,UAAAA,UAAU,CAAC,KAAD,CAAV;AACH,SAHD,MAGO;AACHJ,UAAAA,QAAQ,CAAC4C,OAAT,CAAiBG,cAAjB,CAAgCC,WAAhC,GAA8C,IAA9C;AACH;AACJ;;AAED,UAAItC,MAAJ,EAAY;AACR;AACAE,QAAAA,aAAa,CAACqC,OAAd,CAAsB,UAACC,QAAD,EAAWpC,CAAX,EAAiB;AAAA,cAC7BC,CAD6B,GACmBmC,QADnB,CAC7BnC,CAD6B;AAAA,cAC1BG,MAD0B,GACmBgC,QADnB,CAC1BhC,MAD0B;AAAA,cAClBC,KADkB,GACmB+B,QADnB,CAClB/B,KADkB;AAAA,cACXC,OADW,GACmB8B,QADnB,CACX9B,OADW;AAAA,cACFC,OADE,GACmB6B,QADnB,CACF7B,OADE;AAAA,cACOC,OADP,GACmB4B,QADnB,CACO5B,OADP;AAEnCP,UAAAA,CAAC,GAAGmC,QAAQ,CAACnC,CAAT,IAAcI,KAAK,GAAG,CAA1B;AACAV,UAAAA,SAAS,CAACiB,QAAV,CAAmBU,GAAnB,CACIhB,OAAO,GAAID,KAAK,GAAG,CAAT,GAAcJ,CAAxB,GAA4BC,IAAI,CAACmC,GAAL,CAASpC,CAAC,GAAGG,MAAb,CADhC,EAEIG,OAAO,GAAIF,KAAK,GAAG,CAAT,GAAcJ,CAF5B,EAGIO,OAAO,GAAIP,CAAC,GAAGG,MAAL,GAAe,CAH7B;;AAKA,cAAIT,SAAS,CAACiB,QAAV,CAAmBW,CAAnB,GAAuB,CAA3B,EAA8B;AAC1Ba,YAAAA,QAAQ,CAACnC,CAAT,GAAa,CAAb;AACH;;AACDN,UAAAA,SAAS,CAACkC,YAAV;AACAnC,UAAAA,OAAO,CAACoC,OAAR,CAAgBC,WAAhB,CAA4B/B,CAA5B,EAA+BL,SAAS,CAACqC,MAAzC;AACH,SAbD;AAcAtC,QAAAA,OAAO,CAACoC,OAAR,CAAgBG,cAAhB,CAA+BC,WAA/B,GAA6C,IAA7C;AACH;;AAED,UAAIpB,WAAJ,EAAiB;AACb,YAAIwB,QAAQ,GAAG3B,eAAe,CAACE,KAAhB,CAAsBO,CAAtB,GAA0B,GAAzC;AACAT,QAAAA,eAAe,CAACE,KAAhB,CAAsBS,GAAtB,CAA0BgB,QAA1B,EAAoCA,QAApC,EAA8CA,QAA9C;;AACA,YAAI3B,eAAe,CAACE,KAAhB,CAAsBO,CAAtB,GAA0B,CAA9B,EAAiC;AAC7BV,UAAAA,YAAY,CAACoB,OAAb,CAAqBG,cAArB,CAAoCC,WAApC,GAAkD,KAAlD;AACAnB,UAAAA,cAAc,CAAC,KAAD,CAAd;AACH,SAHD,MAGO;AACHJ,UAAAA,eAAe,CAACkB,YAAhB;AACAnB,UAAAA,YAAY,CAACoB,OAAb,CAAqBC,WAArB,CAAiC,CAAjC,EAAoCpB,eAAe,CAACqB,MAApD;AACAtB,UAAAA,YAAY,CAACoB,OAAb,CAAqBG,cAArB,CAAoCC,WAApC,GAAkD,IAAlD;AACH;AACJ;AAEJ,KAlEO,CAAR;AAoEA,wBACI;AAAA,iBACK7C,OAAO,iBACJ;AAAe,QAAA,GAAG,EAAEH,QAApB;AAA8B,QAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,GAAb,CAApC;AAAA,gCACI;AAAmB,UAAA,MAAM,EAAC,UAA1B;AAAqC,UAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX;AAA3C;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAmB,UAAA,MAAM,EAAC,UAA1B;AAAqC,UAAA,KAAK,EAAC;AAA3C;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFR,EAQKU,MAAM,iBACH;AAAe,QAAA,GAAG,EAAEF,OAApB;AAA6B,QAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAaT,KAAb,CAAnC;AAAA,gCACI;AAA4B,UAAA,MAAM,EAAC,UAAnC;AAA8C,UAAA,IAAI,EAAE,CAAC,IAAD,EAAO,CAAP;AAApD;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAmB,UAAA,MAAM,EAAC,UAA1B;AAAqC,UAAA,KAAK,EAAC;AAA3C;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cATR;AAAA,oBADJ;AAiBH;;AA3I0B,KAElBD,KAFkB;AAAA,YAsDvBL,QAtDuB;AAAA;;AA6I3B,WAAS4D,OAAT,GAAmB;AAAA;;AAEf,QAAMC,UAAU,GAAGjE,MAAM,EAAzB;AACA,QAAMkE,aAAa,GAAG,IAAI3D,KAAK,CAACM,QAAV,CAAmB;AACrCwB,MAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAD2B;AAErCC,MAAAA,KAAK,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT;AAF8B,KAAnB,CAAtB;AAKAlC,IAAAA,QAAQ,CAAC,YAAM;AACX,WAAK,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxBqB,QAAAA,aAAa,CAACZ,YAAd;AACAW,QAAAA,UAAU,CAACV,OAAX,CAAmBC,WAAnB,CAA+BX,CAA/B,EAAkCqB,aAAa,CAACT,MAAhD;AACH;;AACDQ,MAAAA,UAAU,CAACV,OAAX,CAAmBG,cAAnB,CAAkCC,WAAlC,GAAgD,IAAhD;AACH,KANO,CAAR;AAQA,wBACI;AAAe,MAAA,UAAU,MAAzB;AAA0B,MAAA,GAAG,EAAEM,UAA/B;AAA2C,MAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,CAAb,CAAjD;AAAA,8BACI;AAAmB,QAAA,MAAM,EAAC,UAA1B;AAAqC,QAAA,IAAI,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT;AAA3C;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAmB,QAAA,MAAM,EAAC,UAA1B;AAAqC,QAAA,KAAK,EAAC;AAA3C;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH;;AAnK0B,MA6IlBD,OA7IkB;AAAA,YAqJvB5D,QArJuB;AAAA;;AAsK3B,sBACI;AAAO,IAAA,OAAO,EAAE,IAAhB;AAAA,2BAEI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,WADJ;AAMH,CA5KM;AA8KP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;KA3LaI,S","sourcesContent":["/*\r\nAuto-generated by: https://github.com/pmndrs/gltfjsx\r\n*/\r\n\r\nimport React, { useState, useRef, useEffect, useMemo } from 'react'\r\nimport { useLoader, useFrame, useThree } from 'react-three-fiber'\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\r\nimport * as THREE from 'three'\r\n\r\nexport const Particles = () => {\r\n\r\n    function Swarm({ count }) {\r\n\r\n        const speedRef = useRef();\r\n        const speedObject = new THREE.Object3D();\r\n        const [speedOn, setSpeedOn] = useState(true);\r\n\r\n        useEffect(() => {\r\n            const timer = setTimeout(() => {\r\n                setSpeedOn(false);\r\n            }, 6000);\r\n            return () => clearTimeout(timer);\r\n        }, []);\r\n\r\n        const treeRef = useRef();\r\n        const treeDummy = useMemo(() => new THREE.Object3D(), [])\r\n        const [treeOn, setTreeOn] = useState(false);\r\n        // Generate some random positions, speed factors and timings\r\n        const treeParticles = useMemo(() => {\r\n            const temp = [];\r\n            for (let i = 0; i < count; i++) {\r\n                const t = Math.random() * 100;\r\n                const factor = 2 + Math.random() * 2;\r\n                const speed = 0.1 + Math.random() / 3;\r\n                const xFactor = 1 - Math.random() * 9;\r\n                const yFactor = 1 + Math.random() * 5;\r\n                const zFactor = -15 + Math.random() * 1.5;\r\n                temp.push({ t, factor, speed, xFactor, yFactor, zFactor });\r\n            }\r\n            return temp\r\n        }, [count]);\r\n\r\n        useEffect(() => {\r\n            const timer = setTimeout(() => {\r\n                setTreeOn(true);\r\n            }, 7000);\r\n            return () => clearTimeout(timer);\r\n        }, []);\r\n\r\n        const shockwaveRef = useRef();\r\n        const shockwaveObject = new THREE.Object3D({\r\n            position: [0, 2, 0],\r\n            scale: [0.2, 0.2, 0.2]\r\n        });\r\n        const [shockwaveOn, setShockwaveOn] = useState(false);\r\n        /*\r\n        useEffect(() => {\r\n          const timer = setTimeout(() => {\r\n            setShockwaveOn(true);\r\n          }, 16000);\r\n          return () => clearTimeout(timer);\r\n        }, []); */\r\n\r\n        useFrame(state => {\r\n\r\n            const time = state.clock.getElapsedTime();\r\n\r\n            if (speedOn) {\r\n                for (let x = 0; x < 100; x++) {\r\n                    const id = x;\r\n                    speedObject.position.set(\r\n                        speedObject.position.x + 2,\r\n                        speedObject.position.y + 0.15,\r\n                        speedObject.position.z + 2);\r\n                    if (speedObject.position.z > 50 && time < 5.5) {\r\n                        speedObject.position.set(\r\n                            -220 + Math.random() * 40,\r\n                            2 - Math.random() * 20,\r\n                            -220 + Math.random() * 40);\r\n                        let ranDirection = 50 - Math.random() * 100;\r\n                        speedObject.lookAt(\r\n                            new THREE.Vector3(\r\n                                state.camera.position.x + ranDirection,\r\n                                state.camera.position.y,\r\n                                state.camera.position.z + ranDirection));\r\n                    }\r\n                    speedObject.updateMatrix();\r\n                    speedRef.current.setMatrixAt(id, speedObject.matrix);\r\n                }\r\n                if (time > 6000) {\r\n                    speedRef.current.instanceMatrix.needsUpdate = false;\r\n                    setSpeedOn(false);\r\n                } else {\r\n                    speedRef.current.instanceMatrix.needsUpdate = true;\r\n                }\r\n            }\r\n\r\n            if (treeOn) {\r\n                // Run through the randomized data to calculate some movement\r\n                treeParticles.forEach((particle, i) => {\r\n                    let { t, factor, speed, xFactor, yFactor, zFactor } = particle;\r\n                    t = particle.t += speed / 2;\r\n                    treeDummy.position.set(\r\n                        xFactor + (speed / 3) * t + Math.cos(t / factor),\r\n                        yFactor - (speed / 3) * t,\r\n                        zFactor + (t * factor) / 3\r\n                    );\r\n                    if (treeDummy.position.y < 0) {\r\n                        particle.t = 0;\r\n                    }\r\n                    treeDummy.updateMatrix();\r\n                    treeRef.current.setMatrixAt(i, treeDummy.matrix);\r\n                })\r\n                treeRef.current.instanceMatrix.needsUpdate = true;\r\n            }\r\n\r\n            if (shockwaveOn) {\r\n                let newScale = shockwaveObject.scale.x * 1.1;\r\n                shockwaveObject.scale.set(newScale, newScale, newScale);\r\n                if (shockwaveObject.scale.x > 2) {\r\n                    shockwaveRef.current.instanceMatrix.needsUpdate = false;\r\n                    setShockwaveOn(false);\r\n                } else {\r\n                    shockwaveObject.updateMatrix();\r\n                    shockwaveRef.current.setMatrixAt(1, shockwaveObject.matrix);\r\n                    shockwaveRef.current.instanceMatrix.needsUpdate = true;\r\n                }\r\n            }\r\n\r\n        })\r\n\r\n        return (\r\n            <>\r\n                {speedOn &&\r\n                    <instancedMesh ref={speedRef} args={[null, null, 100]}>\r\n                        <boxBufferGeometry attach=\"geometry\" args={[0.1, 0.1, 50]} />\r\n                        <meshBasicMaterial attach=\"material\" color=\"white\" />\r\n                    </instancedMesh>\r\n                }\r\n\r\n                {treeOn &&\r\n                    <instancedMesh ref={treeRef} args={[null, null, count]}>\r\n                        <dodecahedronBufferGeometry attach=\"geometry\" args={[0.05, 0]} />\r\n                        <meshBasicMaterial attach=\"material\" color=\"#ffaaaa\" />\r\n                    </instancedMesh>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n\r\n    function Example() {\r\n\r\n        const exampleRef = useRef();\r\n        const exampleObject = new THREE.Object3D({\r\n            position: [0, 0, 0],\r\n            scale: [10, 10, 10]\r\n        });\r\n\r\n        useFrame(() => {\r\n            for (let x = 0; x < 2; x++) {\r\n                exampleObject.updateMatrix();\r\n                exampleRef.current.setMatrixAt(x, exampleObject.matrix);\r\n            }\r\n            exampleRef.current.instanceMatrix.needsUpdate = true;\r\n        })\r\n\r\n        return (\r\n            <instancedMesh castShadow ref={exampleRef} args={[null, null, 2]}>\r\n                <boxBufferGeometry attach=\"geometry\" args={[10, 10, 10]} />\r\n                <meshBasicMaterial attach=\"material\" color=\"white\" />\r\n            </instancedMesh>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <group dispose={null}>\r\n            {/*<Swarm count={10} />*/}\r\n            <Example />\r\n        </group>\r\n    )\r\n}\r\n\r\n/*return (\r\n    <group ref={ref} dispose={null}>\r\n      <Boxes amount={2} material=\"meshBasicMaterial\" color=\"lightpink\" />\r\n      <Swarm count={10} />\r\n      <Boxes amount={6} color=\"#575760\" />\r\n      <primitive object={nodes.Armature_Bone} />\r\n        <skinnedMesh material={materials['Material.001']} geometry={nodes.Cube.geometry} skeleton={nodes.Cube.skeleton} />\r\n    </group>\r\n  )\r\n\r\n\r\n  Kjell spoition : <group position={[1.08, -0.25, -0]} scale={[0.6, 0.6, 0.6]}>\r\n\r\n  */\r\n"]},"metadata":{},"sourceType":"module"}