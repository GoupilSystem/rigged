{"ast":null,"code":"import _slicedToArray from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\rigged - Copy\\\\src\\\\Stacy.js\",\n    _s = $RefreshSig$();\n\n// Auto-generated by https://github.com/react-spring/gltfjsx\nimport * as THREE from \"three\";\nimport React, { useRef, useMemo, useState, useEffect } from 'react';\nimport { useThree, useLoader, useFrame } from \"@react-three/fiber\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { getMouseDegrees } from \"./utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar tempObject = new THREE.Object3D();\nvar tempColor = new THREE.Color();\nvar colors = new Array(1000).fill().map(function () {\n  return niceColors[17][Math.floor(Math.random() * 5)];\n});\nexport default function Boxes() {\n  _s();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      hovered = _useState2[0],\n      set = _useState2[1];\n\n  var colorArray = useMemo(function () {\n    return Float32Array.from(new Array(1000).fill().flatMap(function (_, i) {\n      return tempColor.set(colors[i]).toArray();\n    }));\n  }, []);\n  var ref = useRef();\n  var previous = useRef();\n  useEffect(function () {\n    return void (previous.current = hovered);\n  }, [hovered]);\n  useFrame(function (state) {\n    var time = state.clock.getElapsedTime();\n    ref.current.rotation.x = Math.sin(time / 4);\n    ref.current.rotation.y = Math.sin(time / 2);\n    var i = 0;\n\n    for (var x = 0; x < 10; x++) {\n      for (var y = 0; y < 10; y++) {\n        for (var z = 0; z < 10; z++) {\n          var id = i++;\n          tempObject.position.set(5 - x, 5 - y, 5 - z);\n          tempObject.rotation.y = Math.sin(x / 4 + time) + Math.sin(y / 4 + time) + Math.sin(z / 4 + time);\n          tempObject.rotation.z = tempObject.rotation.y * 2;\n\n          if (hovered !== previous.current) {\n            tempColor.set(id === hovered ? 'white' : colors[id]).toArray(colorArray, id * 3);\n            ref.current.geometry.attributes.color.needsUpdate = true;\n          }\n\n          var scale = id === hovered ? 2 : 1;\n          tempObject.scale.set(scale, scale, scale);\n          tempObject.updateMatrix();\n          ref.current.setMatrixAt(id, tempObject.matrix);\n        }\n      }\n    }\n\n    ref.current.instanceMatrix.needsUpdate = true;\n  });\n  return /*#__PURE__*/_jsxDEV(\"instancedMesh\", {\n    ref: ref,\n    args: [null, null, 1000],\n    onPointerMove: function onPointerMove(e) {\n      return set(e.instanceId);\n    },\n    onPointerOut: function onPointerOut(e) {\n      return set(undefined);\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n      args: [0.7, 0.7, 0.7],\n      children: /*#__PURE__*/_jsxDEV(\"instancedBufferAttribute\", {\n        attachObject: ['attributes', 'color'],\n        args: [colorArray, 3]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"meshPhongMaterial\", {\n      vertexColors: THREE.VertexColors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Boxes, \"eoIbxcAmY9iYuI+ChRmCQmzF03U=\", false, function () {\n  return [useFrame];\n});\n\n_c = Boxes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Boxes\");","map":{"version":3,"sources":["C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/src/Stacy.js"],"names":["THREE","React","useRef","useMemo","useState","useEffect","useThree","useLoader","useFrame","GLTFLoader","getMouseDegrees","tempObject","Object3D","tempColor","Color","colors","Array","fill","map","niceColors","Math","floor","random","Boxes","hovered","set","colorArray","Float32Array","from","flatMap","_","i","toArray","ref","previous","current","state","time","clock","getElapsedTime","rotation","x","sin","y","z","id","position","geometry","attributes","color","needsUpdate","scale","updateMatrix","setMatrixAt","matrix","instanceMatrix","e","instanceId","undefined","VertexColors"],"mappings":";;;;;AAAA;AAEA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,KAAP,IAAgBC,MAAhB,EAAwBC,OAAxB,EAAiCC,QAAjC,EAA2CC,SAA3C,QAA4D,OAA5D;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,QAA9B,QAA8C,oBAA9C;AACA,SAASC,UAAT,QAA2B,uCAA3B;AACA,SAASC,eAAT,QAAgC,SAAhC;;AAEA,IAAMC,UAAU,GAAG,IAAIX,KAAK,CAACY,QAAV,EAAnB;AACA,IAAMC,SAAS,GAAG,IAAIb,KAAK,CAACc,KAAV,EAAlB;AACA,IAAMC,MAAM,GAAG,IAAIC,KAAJ,CAAU,IAAV,EAAgBC,IAAhB,GAAuBC,GAAvB,CAA2B;AAAA,SAAMC,UAAU,CAAC,EAAD,CAAV,CAAeC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,CAA3B,CAAf,CAAN;AAAA,CAA3B,CAAf;AAEA,eAAe,SAASC,KAAT,GAAiB;AAAA;;AAAA,kBACPnB,QAAQ,EADD;AAAA;AAAA,MACvBoB,OADuB;AAAA,MACdC,GADc;;AAE9B,MAAMC,UAAU,GAAGvB,OAAO,CAAC;AAAA,WAAMwB,YAAY,CAACC,IAAb,CAAkB,IAAIZ,KAAJ,CAAU,IAAV,EAAgBC,IAAhB,GAAuBY,OAAvB,CAA+B,UAACC,CAAD,EAAIC,CAAJ;AAAA,aAAUlB,SAAS,CAACY,GAAV,CAAcV,MAAM,CAACgB,CAAD,CAApB,EAAyBC,OAAzB,EAAV;AAAA,KAA/B,CAAlB,CAAN;AAAA,GAAD,EAAwG,EAAxG,CAA1B;AAEA,MAAMC,GAAG,GAAG/B,MAAM,EAAlB;AACA,MAAMgC,QAAQ,GAAGhC,MAAM,EAAvB;AACAG,EAAAA,SAAS,CAAC;AAAA,WAAM,MAAM6B,QAAQ,CAACC,OAAT,GAAmBX,OAAzB,CAAN;AAAA,GAAD,EAA0C,CAACA,OAAD,CAA1C,CAAT;AAEAhB,EAAAA,QAAQ,CAAC,UAAC4B,KAAD,EAAW;AAClB,QAAMC,IAAI,GAAGD,KAAK,CAACE,KAAN,CAAYC,cAAZ,EAAb;AACAN,IAAAA,GAAG,CAACE,OAAJ,CAAYK,QAAZ,CAAqBC,CAArB,GAAyBrB,IAAI,CAACsB,GAAL,CAASL,IAAI,GAAG,CAAhB,CAAzB;AACAJ,IAAAA,GAAG,CAACE,OAAJ,CAAYK,QAAZ,CAAqBG,CAArB,GAAyBvB,IAAI,CAACsB,GAAL,CAASL,IAAI,GAAG,CAAhB,CAAzB;AACA,QAAIN,CAAC,GAAG,CAAR;;AACA,SAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB;AACE,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB;AACE,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,cAAMC,EAAE,GAAGd,CAAC,EAAZ;AACApB,UAAAA,UAAU,CAACmC,QAAX,CAAoBrB,GAApB,CAAwB,IAAIgB,CAA5B,EAA+B,IAAIE,CAAnC,EAAsC,IAAIC,CAA1C;AACAjC,UAAAA,UAAU,CAAC6B,QAAX,CAAoBG,CAApB,GAAwBvB,IAAI,CAACsB,GAAL,CAASD,CAAC,GAAG,CAAJ,GAAQJ,IAAjB,IAAyBjB,IAAI,CAACsB,GAAL,CAASC,CAAC,GAAG,CAAJ,GAAQN,IAAjB,CAAzB,GAAkDjB,IAAI,CAACsB,GAAL,CAASE,CAAC,GAAG,CAAJ,GAAQP,IAAjB,CAA1E;AACA1B,UAAAA,UAAU,CAAC6B,QAAX,CAAoBI,CAApB,GAAwBjC,UAAU,CAAC6B,QAAX,CAAoBG,CAApB,GAAwB,CAAhD;;AACA,cAAInB,OAAO,KAAKU,QAAQ,CAACC,OAAzB,EAAkC;AAChCtB,YAAAA,SAAS,CAACY,GAAV,CAAcoB,EAAE,KAAKrB,OAAP,GAAiB,OAAjB,GAA2BT,MAAM,CAAC8B,EAAD,CAA/C,EAAqDb,OAArD,CAA6DN,UAA7D,EAAyEmB,EAAE,GAAG,CAA9E;AACAZ,YAAAA,GAAG,CAACE,OAAJ,CAAYY,QAAZ,CAAqBC,UAArB,CAAgCC,KAAhC,CAAsCC,WAAtC,GAAoD,IAApD;AACD;;AACD,cAAMC,KAAK,GAAGN,EAAE,KAAKrB,OAAP,GAAiB,CAAjB,GAAqB,CAAnC;AACAb,UAAAA,UAAU,CAACwC,KAAX,CAAiB1B,GAAjB,CAAqB0B,KAArB,EAA4BA,KAA5B,EAAmCA,KAAnC;AACAxC,UAAAA,UAAU,CAACyC,YAAX;AACAnB,UAAAA,GAAG,CAACE,OAAJ,CAAYkB,WAAZ,CAAwBR,EAAxB,EAA4BlC,UAAU,CAAC2C,MAAvC;AACD;AAdH;AADF;;AAgBArB,IAAAA,GAAG,CAACE,OAAJ,CAAYoB,cAAZ,CAA2BL,WAA3B,GAAyC,IAAzC;AACD,GAtBO,CAAR;AAwBA,sBACE;AAAe,IAAA,GAAG,EAAEjB,GAApB;AAAyB,IAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAA/B;AAAmD,IAAA,aAAa,EAAE,uBAACuB,CAAD;AAAA,aAAO/B,GAAG,CAAC+B,CAAC,CAACC,UAAH,CAAV;AAAA,KAAlE;AAA4F,IAAA,YAAY,EAAE,sBAACD,CAAD;AAAA,aAAO/B,GAAG,CAACiC,SAAD,CAAV;AAAA,KAA1G;AAAA,4BACE;AAAa,MAAA,IAAI,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnB;AAAA,6BACE;AAA0B,QAAA,YAAY,EAAE,CAAC,YAAD,EAAe,OAAf,CAAxC;AAAiE,QAAA,IAAI,EAAE,CAAChC,UAAD,EAAa,CAAb;AAAvE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAmB,MAAA,YAAY,EAAE1B,KAAK,CAAC2D;AAAvC;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;;GAxCuBpC,K;UAQtBf,Q;;;KARsBe,K","sourcesContent":["// Auto-generated by https://github.com/react-spring/gltfjsx\r\n\r\nimport * as THREE from \"three\"\r\nimport React, { useRef, useMemo, useState, useEffect } from 'react'\r\nimport { useThree, useLoader, useFrame } from \"@react-three/fiber\"\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\"\r\nimport { getMouseDegrees } from \"./utils\"\r\n\r\nconst tempObject = new THREE.Object3D()\r\nconst tempColor = new THREE.Color()\r\nconst colors = new Array(1000).fill().map(() => niceColors[17][Math.floor(Math.random() * 5)])\r\n\r\nexport default function Boxes() {\r\n  const [hovered, set] = useState()\r\n  const colorArray = useMemo(() => Float32Array.from(new Array(1000).fill().flatMap((_, i) => tempColor.set(colors[i]).toArray())), [])\r\n\r\n  const ref = useRef()\r\n  const previous = useRef()\r\n  useEffect(() => void (previous.current = hovered), [hovered])\r\n\r\n  useFrame((state) => {\r\n    const time = state.clock.getElapsedTime()\r\n    ref.current.rotation.x = Math.sin(time / 4)\r\n    ref.current.rotation.y = Math.sin(time / 2)\r\n    let i = 0\r\n    for (let x = 0; x < 10; x++)\r\n      for (let y = 0; y < 10; y++)\r\n        for (let z = 0; z < 10; z++) {\r\n          const id = i++\r\n          tempObject.position.set(5 - x, 5 - y, 5 - z)\r\n          tempObject.rotation.y = Math.sin(x / 4 + time) + Math.sin(y / 4 + time) + Math.sin(z / 4 + time)\r\n          tempObject.rotation.z = tempObject.rotation.y * 2\r\n          if (hovered !== previous.current) {\r\n            tempColor.set(id === hovered ? 'white' : colors[id]).toArray(colorArray, id * 3)\r\n            ref.current.geometry.attributes.color.needsUpdate = true\r\n          }\r\n          const scale = id === hovered ? 2 : 1\r\n          tempObject.scale.set(scale, scale, scale)\r\n          tempObject.updateMatrix()\r\n          ref.current.setMatrixAt(id, tempObject.matrix)\r\n        }\r\n    ref.current.instanceMatrix.needsUpdate = true\r\n  })\r\n\r\n  return (\r\n    <instancedMesh ref={ref} args={[null, null, 1000]} onPointerMove={(e) => set(e.instanceId)} onPointerOut={(e) => set(undefined)}>\r\n      <boxGeometry args={[0.7, 0.7, 0.7]}>\r\n        <instancedBufferAttribute attachObject={['attributes', 'color']} args={[colorArray, 3]} />\r\n      </boxGeometry>\r\n      <meshPhongMaterial vertexColors={THREE.VertexColors} />\r\n    </instancedMesh>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}