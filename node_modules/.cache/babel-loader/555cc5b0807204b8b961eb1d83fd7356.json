{"ast":null,"code":"import _slicedToArray from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\scarleti\\\\Desktop\\\\Cyril\\\\React\\\\rigged - Copy\\\\src\\\\app.js\",\n    _s4 = $RefreshSig$();\n\n// Auto-generated by https://github.com/react-spring/gltfjsx\nimport * as THREE from \"three\";\nimport React, { Suspense, useEffect, useRef, useState } from \"react\";\nimport { Canvas, useThree, useLoader, useFrame } from \"@react-three/fiber\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { HexColorPicker } from \"react-colorful\";\nimport { proxy, useProxy } from \"valtio\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { Map0 } from \"./map0\";\nimport { useStore } from \"./audioStore\";\nimport \"./styles.css\"; // Using a Valtio state model to bridge reactivity between\n// the canvas and the dom, both can write to it and/or react to it.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar state = proxy({\n  current: null,\n  items: {\n    Material_Mouth: \"#ffffff\",\n    Material_Eye: \"#ffffff\",\n    Material_Lips: \"#ffffff\",\n    Material_Shoe: \"#ffffff\",\n    Material_Hair: \"#ffffff\",\n    Material_Short: \"#ffffff\",\n    Material_Skin: \"#ffffff\",\n    Material_Body: \"#ffffff\"\n  }\n});\nexport default function App(_ref) {\n  _s4();\n\n  var _this = this,\n      _s = $RefreshSig$(),\n      _s2 = $RefreshSig$(),\n      _s3 = $RefreshSig$();\n\n  var mouse = _ref.mouse,\n      props = _objectWithoutProperties(_ref, [\"mouse\"]);\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      intro = _useState2[0],\n      setIntro = _useState2[1];\n\n  var cameraDummyPosition = new THREE.Vector3(25, 5, 0);\n  var lookAtPos = new THREE.Vector3(0, 1, 0);\n\n  var Content = function Content() {\n    _s();\n\n    var kjellRef = useRef();\n\n    var _useLoader = useLoader(GLTFLoader, \"/kjell.gltf\"),\n        nodes = _useLoader.nodes,\n        materials = _useLoader.materials,\n        animations = _useLoader.animations; // Set behavior\n\n\n    var _useState3 = useState(0.75),\n        _useState4 = _slicedToArray(_useState3, 2),\n        kjellDummyPositionX = _useState4[0],\n        setKjellDummyPositionX = _useState4[1];\n\n    var _useState5 = useState(-6),\n        _useState6 = _slicedToArray(_useState5, 2),\n        kjellDummyPositionY = _useState6[0],\n        setKjellDummyPositionY = _useState6[1];\n\n    var _useState7 = useState(0.01),\n        _useState8 = _slicedToArray(_useState7, 2),\n        kjellStep = _useState8[0],\n        setKjellStep = _useState8[1];\n\n    var watchupKjell = function watchupKjell() {\n      // Kjelles position to reach in the air\n      setKjellDummyPositionX(0);\n      setKjellDummyPositionY(70); // Lerp speed: not to big because this is camera speed at the end\n\n      setKjellStep(0.15); // Kjells settings\n\n      kjellRef.current.rotation.y = -Math.PI / 4;\n      kjellRef.current.scale.set(1, 1, 1);\n    }; // Set animation\n\n\n    var _useState9 = useState(function () {\n      return new THREE.AnimationMixer();\n    }),\n        _useState10 = _slicedToArray(_useState9, 1),\n        mixer = _useState10[0];\n\n    useEffect(function () {\n      void mixer.clipAction(animations[0], kjellRef.current).play(), [];\n    }); // Event manager\n\n    var _useState11 = useState(-1),\n        _useState12 = _slicedToArray(_useState11, 2),\n        chapter = _useState12[0],\n        setChapter = _useState12[1]; // Audio\n\n\n    var _useStore = useStore(function (state) {\n      return state.api;\n    }),\n        zik = _useStore.zik,\n        cape = _useStore.cape,\n        fly = _useStore.fly,\n        arrival = _useStore.arrival;\n\n    useFrame(function (state) {\n      mixer.update(0.01);\n\n      if (mixer.time < 5) {\n        if (mixer.time > 4.2) {\n          if (mixer.time > 4.6) {\n            if (kjellDummyPositionY !== -0.8) {\n              setKjellDummyPositionY(-0.8);\n            } // Set Dummy for Kjell = landing position\n\n\n            if (kjellRef.current.position.y < 5) {\n              if (kjellRef.current.position.y !== -0.8) {\n                kjellRef.current.position.y = -0.8; // Rounds kjells vertical pos to -1;\n\n                setChapter(2); // Shockwave on  in map.js\n\n                setTimeout(function () {\n                  setChapter(3);\n                }, 500); // Camera shakes 500ms\n              }\n\n              lookAtPos.y = Math.cos(state.clock.getElapsedTime() * 50) * 0.1; // Camera shakes\n            }\n\n            lookAtPos.lerp(kjellRef.current.position, 0.25); // Camera tries to follow landing Kjell\n          } else {\n            if (kjellDummyPositionY !== 70) {\n              watchupKjell();\n            } // Set Kjell up\n\n\n            lookAtPos.lerp(kjellRef.current.position, 0.025); // End of arrival, camera without Kjell in the area, move camera towards up for dynamic\n          }\n\n          if (chapter === 0) {\n            // Audio\n            setChapter(1);\n            arrival();\n          }\n        } else {\n          // Kjell shaking during flight\n          if (kjellStep < 1) {\n            setKjellStep(function (prevKjellStep) {\n              return prevKjellStep * 1.01;\n            });\n          }\n\n          setKjellDummyPositionX(2.5 + Math.cos(mixer.time * Math.random()) * 0.5);\n          setKjellDummyPositionY(function (prevKjellDummyPositionY) {\n            return prevKjellDummyPositionY + kjellStep;\n          }); // Camera\n\n          state.camera.position.lerp(cameraDummyPosition, 0.0002);\n\n          if (chapter === -1) {\n            // Audio\n            setChapter(0);\n            fly();\n            cape();\n          }\n        }\n\n        kjellRef.current.position.lerp(new THREE.Vector3(kjellDummyPositionX, kjellDummyPositionY, 0), kjellStep);\n      } //Intro\n\n\n      lookAtPos.x = Math.sin(state.clock.getElapsedTime()) * 0.25;\n      state.camera.lookAt(lookAtPos);\n      state.camera.updateProjectionMatrix();\n    }); // Cursor showing current color\n\n    var snap = useProxy(state);\n\n    var _useState13 = useState(null),\n        _useState14 = _slicedToArray(_useState13, 2),\n        hovered = _useState14[0],\n        set = _useState14[1];\n\n    useEffect(function () {\n      var cursor = \"<svg width=\\\"64\\\" height=\\\"64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><g clip-path=\\\"url(#clip0)\\\"><path fill=\\\"rgba(255, 255, 255, 0.5)\\\" d=\\\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\\\" stroke=\\\"#000\\\"/><g filter=\\\"url(#filter0_d)\\\"><path d=\\\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\\\" fill=\\\"\".concat(snap.items[hovered], \"\\\"/></g><path d=\\\"M2 2l11 2.947L4.947 13 2 2z\\\" fill=\\\"#000\\\"/><text fill=\\\"#000\\\" style=\\\"white-space:pre\\\" font-family=\\\"Inter var, sans-serif\\\" font-size=\\\"10\\\" letter-spacing=\\\"-.01em\\\"><tspan x=\\\"35\\\" y=\\\"63\\\">\").concat(hovered, \"</tspan></text></g><defs><clipPath id=\\\"clip0\\\"><path fill=\\\"#fff\\\" d=\\\"M0 0h64v64H0z\\\"/></clipPath><filter id=\\\"filter0_d\\\" x=\\\"6\\\" y=\\\"8\\\" width=\\\"47\\\" height=\\\"47\\\" filterUnits=\\\"userSpaceOnUse\\\" color-interpolation-filters=\\\"sRGB\\\"><feFlood flood-opacity=\\\"0\\\" result=\\\"BackgroundImageFix\\\"/><feColorMatrix in=\\\"SourceAlpha\\\" values=\\\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\\\"/><feOffset dy=\\\"2\\\"/><feGaussianBlur stdDeviation=\\\"3\\\"/><feColorMatrix values=\\\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\\\"/><feBlend in2=\\\"BackgroundImageFix\\\" result=\\\"effect1_dropShadow\\\"/><feBlend in=\\\"SourceGraphic\\\" in2=\\\"effect1_dropShadow\\\" result=\\\"shape\\\"/></filter></defs></svg>\");\n      var auto = \"<svg width=\\\"64\\\" height=\\\"64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill=\\\"rgba(255, 255, 255, 0.5)\\\" d=\\\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\\\" stroke=\\\"#000\\\"/><path d=\\\"M2 2l11 2.947L4.947 13 2 2z\\\" fill=\\\"#000\\\"/></svg>\";\n      document.body.style.cursor = \"url('data:image/svg+xml;base64,\".concat(btoa(hovered ? cursor : auto), \"'), auto\");\n    }, [hovered]);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Map0, {\n        shockwaveOn: chapter === 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"group\", {\n        ref: kjellRef,\n        scale: [3, 3, 3],\n        name: \"Armature\",\n        dispose: null,\n        onPointerOver: function onPointerOver(e) {\n          return e.stopPropagation(), set(e.object.material.name);\n        },\n        onPointerOut: function onPointerOut(e) {\n          return e.intersections.length === 0 && set(null);\n        },\n        onPointerMissed: function onPointerMissed() {\n          return state.current = null;\n        },\n        onPointerDown: function onPointerDown(e) {\n          return e.stopPropagation(), state.current = e.object.material.name;\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"primitive\", {\n          object: nodes.Armature_Bone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"primitive\", {\n          object: nodes.Armature_Bone_L\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"primitive\", {\n          object: nodes.Armature_Bone_R\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"group\", {\n          scale: [0.12, 0.12, 0.12],\n          children: [/*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_1.geometry,\n            material: materials.Material_Mouth,\n            \"material-color\": snap.items.Material_Mouth,\n            skeleton: nodes.Cube_1.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_2.geometry,\n            material: materials.Material_Eye,\n            \"material-color\": snap.items.Material_Eye,\n            skeleton: nodes.Cube_2.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_3.geometry,\n            material: materials.Material_Lips,\n            \"material-color\": snap.items.Material_Lips,\n            skeleton: nodes.Cube_3.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_4.geometry,\n            material: materials.Material_Shoe,\n            \"material-color\": snap.items.Material_Shoe,\n            skeleton: nodes.Cube_4.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_5.geometry,\n            material: materials.Material_Hair,\n            \"material-color\": snap.items.Material_Hair,\n            skeleton: nodes.Cube_5.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_6.geometry,\n            material: materials.Material_Short,\n            \"material-color\": snap.items.Material_Short,\n            skeleton: nodes.Cube_6.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_7.geometry,\n            material: materials.Material_Skin,\n            \"material-color\": snap.items.Material_Skin,\n            skeleton: nodes.Cube_7.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_8.geometry,\n            material: materials.Material_Pupil,\n            \"material-color\": snap.items.Material_Pupil,\n            skeleton: nodes.Cube_8.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"skinnedMesh\", {\n            geometry: nodes.Cube_9.geometry,\n            material: materials.Material_Body,\n            \"material-color\": snap.items.Material_Body,\n            skeleton: nodes.Cube_9.skeleton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true);\n  };\n\n  _s(Content, \"tTOl6GAbbsYL5JfD57Mm1rmQym0=\", false, function () {\n    return [useLoader, useStore, useFrame, useProxy];\n  });\n\n  var CameraController = function CameraController() {\n    _s2();\n\n    var _useThree = useThree(),\n        camera = _useThree.camera,\n        gl = _useThree.gl;\n\n    useEffect(function () {\n      var controls = new OrbitControls(camera, gl.domElement);\n      return function () {\n        controls.dispose();\n      };\n    }, [camera, gl]);\n    return null;\n  };\n\n  _s2(CameraController, \"djMck6qEDqeW1EjWNovzXn2V/KQ=\", false, function () {\n    return [useThree];\n  });\n\n  var _useState15 = useState(\"#b32aa9\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      color = _useState16[0],\n      setColor = _useState16[1];\n\n  function Picker() {\n    _s3();\n\n    var snap = useProxy(state);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: snap.current ? \"block\" : \"none\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(HexColorPicker, {\n        className: \"picker\",\n        color: color,\n        onChange: function onChange(color) {\n          return state.items[snap.current] = color;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: snap.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this);\n  }\n\n  _s3(Picker, \"owO8UyvR6X8b7Skg+GgD1eD/e2w=\", false, function () {\n    return [useProxy];\n  });\n\n  var Lights = function Lights() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"hemisphereLight\", {\n        skyColor: \"#b1e1ff\",\n        groundColor: \"#aaaaaa\",\n        intensity: 0.4\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"pointLight\", {\n        position: [30, 50, 30],\n        color: \"#aaaaaa\",\n        intensity: 0.15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"pointLight\", {\n        position: [100, 100, -100],\n        color: \"#aaaba9\",\n        intensity: 0.25,\n        castShadow: true,\n        \"shadow-mapSize-height\": 1024,\n        \"shadow-mapSize-width\": 1024\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [intro && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Launch Kjell\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          return setIntro(false);\n        },\n        children: \">\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this), !intro && /*#__PURE__*/_jsxDEV(Canvas, {\n      shadowMap: true,\n      camera: {\n        far: 5000,\n        near: 1,\n        position: [100, 5, 100],\n        fov: 5\n      },\n      children: [/*#__PURE__*/_jsxDEV(CameraController, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Lights, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: null,\n        children: /*#__PURE__*/_jsxDEV(\"group\", {\n          scale: [3, 3, 3],\n          children: /*#__PURE__*/_jsxDEV(Content, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(Picker, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s4(App, \"sxmWsjCIkX5PPF4pFfPgKvkuRzY=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/src/app.js"],"names":["THREE","React","Suspense","useEffect","useRef","useState","Canvas","useThree","useLoader","useFrame","GLTFLoader","HexColorPicker","proxy","useProxy","OrbitControls","Map0","useStore","state","current","items","Material_Mouth","Material_Eye","Material_Lips","Material_Shoe","Material_Hair","Material_Short","Material_Skin","Material_Body","App","mouse","props","intro","setIntro","cameraDummyPosition","Vector3","lookAtPos","Content","kjellRef","nodes","materials","animations","kjellDummyPositionX","setKjellDummyPositionX","kjellDummyPositionY","setKjellDummyPositionY","kjellStep","setKjellStep","watchupKjell","rotation","y","Math","PI","scale","set","AnimationMixer","mixer","clipAction","play","chapter","setChapter","api","zik","cape","fly","arrival","update","time","position","setTimeout","cos","clock","getElapsedTime","lerp","prevKjellStep","random","prevKjellDummyPositionY","camera","x","sin","lookAt","updateProjectionMatrix","snap","hovered","cursor","auto","document","body","style","btoa","e","stopPropagation","object","material","name","intersections","length","Armature_Bone","Armature_Bone_L","Armature_Bone_R","Cube_1","geometry","skeleton","Cube_2","Cube_3","Cube_4","Cube_5","Cube_6","Cube_7","Cube_8","Material_Pupil","Cube_9","CameraController","gl","controls","domElement","dispose","color","setColor","Picker","display","Lights","far","near","fov"],"mappings":"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","sourcesContent":["// Auto-generated by https://github.com/react-spring/gltfjsx\r\n\r\nimport * as THREE from \"three\"\r\nimport React, { Suspense, useEffect, useRef, useState } from \"react\"\r\nimport { Canvas, useThree, useLoader, useFrame } from \"@react-three/fiber\"\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\"\r\nimport { HexColorPicker } from \"react-colorful\"\r\nimport { proxy, useProxy } from \"valtio\"\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { Map0 } from \"./map0\";\r\nimport { useStore } from \"./audioStore\";\r\n\r\nimport \"./styles.css\"\r\n\r\n// Using a Valtio state model to bridge reactivity between\r\n// the canvas and the dom, both can write to it and/or react to it.\r\nconst state = proxy({\r\n  current: null,\r\n  items: {\r\n    Material_Mouth: \"#ffffff\",\r\n    Material_Eye: \"#ffffff\",\r\n    Material_Lips: \"#ffffff\",\r\n    Material_Shoe: \"#ffffff\",\r\n    Material_Hair: \"#ffffff\",\r\n    Material_Short: \"#ffffff\",\r\n    Material_Skin: \"#ffffff\",\r\n    Material_Body: \"#ffffff\",\r\n\r\n  },\r\n})\r\n\r\nexport default function App({ mouse, ...props }) {\r\n\r\n  const [intro, setIntro] = useState(true);\r\n  const cameraDummyPosition = new THREE.Vector3(25, 5, 0);\r\n  const lookAtPos = new THREE.Vector3(0, 1, 0)\r\n\r\n  const Content = () => {\r\n\r\n    const kjellRef = useRef();\r\n    const { nodes, materials, animations } = useLoader(GLTFLoader, \"/kjell.gltf\");\r\n\r\n    // Set behavior\r\n    const [kjellDummyPositionX, setKjellDummyPositionX] = useState(0.75);\r\n    const [kjellDummyPositionY, setKjellDummyPositionY] = useState(-6);\r\n    const [kjellStep, setKjellStep] = useState(0.01);\r\n\r\n    const watchupKjell = () => {\r\n      // Kjelles position to reach in the air\r\n      setKjellDummyPositionX(0);\r\n      setKjellDummyPositionY(70);\r\n      // Lerp speed: not to big because this is camera speed at the end\r\n      setKjellStep(0.15);\r\n      // Kjells settings\r\n      kjellRef.current.rotation.y = -Math.PI / 4;\r\n      kjellRef.current.scale.set(1, 1, 1);\r\n    }\r\n\r\n    // Set animation\r\n    const [mixer] = useState(() => new THREE.AnimationMixer());\r\n    useEffect(() => {\r\n      void mixer.clipAction(animations[0], kjellRef.current).play(), []\r\n    })\r\n\r\n    // Event manager\r\n    const [chapter, setChapter] = useState(-1);\r\n\r\n    // Audio\r\n    const { zik, cape, fly, arrival } = useStore(state => state.api)\r\n\r\n    useFrame((state) => {\r\n\r\n      mixer.update(0.01);\r\n\r\n      if (mixer.time < 5) {\r\n        if (mixer.time > 4.2) {\r\n          if (mixer.time > 4.6) {\r\n            if (kjellDummyPositionY !== -0.8) { setKjellDummyPositionY(-0.8); } // Set Dummy for Kjell = landing position\r\n            if (kjellRef.current.position.y < 5) {\r\n              if (kjellRef.current.position.y !== -0.8) {\r\n                kjellRef.current.position.y = -0.8;         // Rounds kjells vertical pos to -1;\r\n                setChapter(2);                            // Shockwave on  in map.js\r\n                setTimeout(() => { setChapter(3) }, 500); // Camera shakes 500ms\r\n              }\r\n              lookAtPos.y = Math.cos(state.clock.getElapsedTime() * 50) * 0.1;   // Camera shakes\r\n            }\r\n            lookAtPos.lerp(kjellRef.current.position, 0.25);  // Camera tries to follow landing Kjell\r\n          }\r\n          else {\r\n            if (kjellDummyPositionY !== 70) { watchupKjell(); } // Set Kjell up\r\n            lookAtPos.lerp(kjellRef.current.position, 0.025);   // End of arrival, camera without Kjell in the area, move camera towards up for dynamic\r\n          }\r\n          if (chapter === 0) {   // Audio\r\n            setChapter(1);\r\n            arrival();\r\n          }\r\n        }\r\n        else {\r\n          // Kjell shaking during flight\r\n          if (kjellStep < 1) { setKjellStep(prevKjellStep => { return prevKjellStep * 1.01 }); }\r\n          setKjellDummyPositionX(2.5 + Math.cos(mixer.time * Math.random()) * 0.5);\r\n          setKjellDummyPositionY(prevKjellDummyPositionY => { return prevKjellDummyPositionY + kjellStep });\r\n          // Camera\r\n          state.camera.position.lerp(cameraDummyPosition, 0.0002);\r\n          if (chapter === -1) {   // Audio\r\n            setChapter(0);\r\n            fly();\r\n            cape();\r\n          }\r\n        }\r\n        kjellRef.current.position.lerp(new THREE.Vector3(kjellDummyPositionX, kjellDummyPositionY, 0), kjellStep);\r\n      }  //Intro\r\n\r\n      lookAtPos.x = Math.sin(state.clock.getElapsedTime()) * 0.25;\r\n      state.camera.lookAt(lookAtPos)\r\n      state.camera.updateProjectionMatrix();\r\n    })\r\n\r\n    // Cursor showing current color\r\n    const snap = useProxy(state);\r\n\r\n    const [hovered, set] = useState(null)\r\n    useEffect(() => {\r\n      const cursor = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0)\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><g filter=\"url(#filter0_d)\"><path d=\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\" fill=\"${snap.items[hovered]}\"/></g><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/><text fill=\"#000\" style=\"white-space:pre\" font-family=\"Inter var, sans-serif\" font-size=\"10\" letter-spacing=\"-.01em\"><tspan x=\"35\" y=\"63\">${hovered}</tspan></text></g><defs><clipPath id=\"clip0\"><path fill=\"#fff\" d=\"M0 0h64v64H0z\"/></clipPath><filter id=\"filter0_d\" x=\"6\" y=\"8\" width=\"47\" height=\"47\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"><feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/><feColorMatrix in=\"SourceAlpha\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/><feOffset dy=\"2\"/><feGaussianBlur stdDeviation=\"3\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\"/><feBlend in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/><feBlend in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/></filter></defs></svg>`\r\n      const auto = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/></svg>`\r\n      document.body.style.cursor = `url('data:image/svg+xml;base64,${btoa(hovered ? cursor : auto)}'), auto`\r\n    }, [hovered])\r\n\r\n    return (\r\n      <>\r\n        <Map0 shockwaveOn={chapter === 2} />\r\n        <group ref={kjellRef} scale={[3, 3, 3]} name=\"Armature\" dispose={null}\r\n          onPointerOver={(e) => (e.stopPropagation(), set(e.object.material.name))}\r\n          onPointerOut={(e) => e.intersections.length === 0 && set(null)}\r\n          onPointerMissed={() => (state.current = null)}\r\n          onPointerDown={(e) => (e.stopPropagation(), (state.current = e.object.material.name))}>\r\n          <primitive object={nodes.Armature_Bone} />\r\n          <primitive object={nodes.Armature_Bone_L} />\r\n          <primitive object={nodes.Armature_Bone_R} />\r\n          <group scale={[0.12, 0.12, 0.12]}>\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_1.geometry}\r\n              material={materials.Material_Mouth}\r\n              material-color={snap.items.Material_Mouth}\r\n              skeleton={nodes.Cube_1.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_2.geometry}\r\n              material={materials.Material_Eye}\r\n              material-color={snap.items.Material_Eye}\r\n              skeleton={nodes.Cube_2.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_3.geometry}\r\n              material={materials.Material_Lips}\r\n              material-color={snap.items.Material_Lips}\r\n              skeleton={nodes.Cube_3.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_4.geometry}\r\n              material={materials.Material_Shoe}\r\n              material-color={snap.items.Material_Shoe}\r\n              skeleton={nodes.Cube_4.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_5.geometry}\r\n              material={materials.Material_Hair}\r\n              material-color={snap.items.Material_Hair}\r\n              skeleton={nodes.Cube_5.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_6.geometry}\r\n              material={materials.Material_Short}\r\n              material-color={snap.items.Material_Short}\r\n              skeleton={nodes.Cube_6.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_7.geometry}\r\n              material={materials.Material_Skin}\r\n              material-color={snap.items.Material_Skin}\r\n              skeleton={nodes.Cube_7.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_8.geometry}\r\n              material={materials.Material_Pupil}\r\n              material-color={snap.items.Material_Pupil}\r\n              skeleton={nodes.Cube_8.skeleton}\r\n            />\r\n            <skinnedMesh\r\n              geometry={nodes.Cube_9.geometry}\r\n              material={materials.Material_Body}\r\n              material-color={snap.items.Material_Body}\r\n              skeleton={nodes.Cube_9.skeleton}\r\n            />\r\n          </group>\r\n        </group>\r\n      </>\r\n    )\r\n  }\r\n\r\n  const CameraController = () => {\r\n    const { camera, gl } = useThree();\r\n    useEffect(\r\n      () => {\r\n        const controls = new OrbitControls(camera, gl.domElement);\r\n        return () => {\r\n          controls.dispose();\r\n        };\r\n      },\r\n      [camera, gl]\r\n    );\r\n    return null;\r\n  };\r\n\r\n  const [color, setColor] = useState(\"#b32aa9\");\r\n  function Picker() {\r\n    const snap = useProxy(state);\r\n    return (\r\n      <div style={{ display: snap.current ? \"block\" : \"none\" }}>\r\n        <HexColorPicker className=\"picker\" color={color} onChange={(color) => (state.items[snap.current] = color)} />\r\n        <h1>{snap.current}</h1>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Lights = () => {\r\n    return (\r\n      <>\r\n        <hemisphereLight skyColor=\"#b1e1ff\" groundColor=\"#aaaaaa\" intensity={0.4} />\r\n        <pointLight position={[30, 50, 30]} color=\"#aaaaaa\" intensity={0.15} />\r\n        <pointLight\r\n          position={[100, 100, -100]}\r\n          color=\"#aaaba9\"\r\n          intensity={0.25}\r\n          castShadow\r\n          shadow-mapSize-height={1024}\r\n          shadow-mapSize-width={1024} />\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {intro &&\r\n        <div className=\"title\">\r\n          <label>\r\n            Launch Kjell</label>\r\n          <button onClick={() => setIntro(false)}>></button>\r\n        </div>\r\n      }\r\n      {!intro &&\r\n        (<Canvas shadowMap camera={{ far: 5000, near: 1, position: [100, 5, 100], fov: 5 }}>\r\n          <CameraController />\r\n          <Lights />\r\n          <Suspense fallback={null}>\r\n            <group scale={[3, 3, 3]}>\r\n              <Content />\r\n            </group>\r\n          </Suspense>\r\n        </Canvas>)\r\n      }\r\n      <Picker />\r\n    </>\r\n  )\r\n\r\n\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}