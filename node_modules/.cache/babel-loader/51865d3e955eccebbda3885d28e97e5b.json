{"ast":null,"code":"import _construct from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport { AudioListener, AudioLoader, HalfFloatType, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, ShaderChunk, Matrix4, Ray, Sphere, Raycaster, Camera } from 'three';\nimport { SMAAImageLoader, EffectComposer, RenderPass, SMAAEffect, NormalPass, SSAOEffect, BlendFunction, BloomEffect, KernelSize, EffectPass } from 'postprocessing';\nimport { TextMesh } from 'troika-3d-text/dist/textmesh-standalone.umd';\nimport ReactDOM from 'react-dom';\nimport StatsImpl from 'stats.js';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nvar OrbitControls = forwardRef(function () {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    enableDamping: true\n  };\n  var ref = arguments.length > 1 ? arguments[1] : undefined;\n  var controls = useRef();\n\n  var _useThree = useThree(),\n      camera = _useThree.camera,\n      gl = _useThree.gl,\n      invalidate = _useThree.invalidate;\n\n  useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  MapControlsImpl: MapControls$1\n});\nvar MapControls = forwardRef(function () {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    enableDamping: true\n  };\n  var ref = arguments.length > 1 ? arguments[1] : undefined;\n  var controls = useRef();\n\n  var _useThree2 = useThree(),\n      camera = _useThree2.camera,\n      gl = _useThree2.gl,\n      invalidate = _useThree2.invalidate;\n\n  useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nvar TrackballControls = forwardRef(function (props, ref) {\n  var controls = useRef();\n\n  var _useThree3 = useThree(),\n      camera = _useThree3.camera,\n      gl = _useThree3.gl,\n      invalidate = _useThree3.invalidate;\n\n  useFrame(function () {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nvar TransformControls = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  var controls = useRef();\n  var group = useRef();\n\n  var _useThree4 = useThree(),\n      camera = _useThree4.camera,\n      gl = _useThree4.gl,\n      invalidate = _useThree4.invalidate;\n\n  useLayoutEffect(function () {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(function () {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props)), /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n});\nvar Detailed = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      distances = _ref.distances,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  var lod = useUpdate(function (lod) {\n    lod.levels.length = 0;\n    lod.children.forEach(function (object, index) {\n      return lod.levels.push({\n        object: object,\n        distance: distances[index]\n      });\n    });\n  }, []);\n  useFrame(function (state) {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\nvar PositionalAudio = forwardRef(function (_ref, ref) {\n  var url = _ref.url,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 1 : _ref$distance,\n      _ref$loop = _ref.loop,\n      loop = _ref$loop === void 0 ? true : _ref$loop,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  var sound = useRef();\n\n  var _useThree5 = useThree(),\n      camera = _useThree5.camera;\n\n  var _useState = useState(function () {\n    return new AudioListener();\n  }),\n      _useState2 = _slicedToArray(_useState, 1),\n      listener = _useState2[0];\n\n  var buffer = useLoader(AudioLoader, url);\n  useEffect(function () {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return function () {\n      return void camera.remove(listener);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\nvar PerspectiveCamera = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault = _ref.makeDefault,\n      makeDefault = _ref$makeDefault === void 0 ? true : _ref$makeDefault,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree6 = useThree(),\n      setDefaultCamera = _useThree6.setDefaultCamera,\n      camera = _useThree6.camera,\n      size = _useThree6.size;\n\n  var cameraRef = useUpdate(function (cam) {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\nvar OrthographicCamera = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$makeDefault2 = _ref.makeDefault,\n      makeDefault = _ref$makeDefault2 === void 0 ? true : _ref$makeDefault2,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  var _useThree7 = useThree(),\n      setDefaultCamera = _useThree7.setDefaultCamera,\n      camera = _useThree7.camera,\n      size = _useThree7.size;\n\n  var cameraRef = useUpdate(function (cam) {\n    return cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nfunction StandardEffects(_ref2) {\n  var _ref2$smaa = _ref2.smaa,\n      smaa = _ref2$smaa === void 0 ? true : _ref2$smaa,\n      _ref2$ao = _ref2.ao,\n      ao = _ref2$ao === void 0 ? true : _ref2$ao,\n      _ref2$bloom = _ref2.bloom,\n      bloom = _ref2$bloom === void 0 ? true : _ref2$bloom,\n      _ref2$edgeDetection = _ref2.edgeDetection,\n      edgeDetection = _ref2$edgeDetection === void 0 ? 0.1 : _ref2$edgeDetection,\n      _ref2$bloomOpacity = _ref2.bloomOpacity,\n      bloomOpacity = _ref2$bloomOpacity === void 0 ? 1 : _ref2$bloomOpacity,\n      effects = _ref2.effects;\n\n  var _useThree8 = useThree(),\n      gl = _useThree8.gl,\n      scene = _useThree8.scene,\n      camera = _useThree8.camera,\n      size = _useThree8.size;\n\n  var smaaProps = useLoader(SMAAImageLoader, '');\n  var composer = useMemo(function () {\n    var composer = new EffectComposer(gl, {\n      frameBufferType: HalfFloatType\n    });\n    composer.addPass(new RenderPass(scene, camera));\n\n    var smaaEffect = _construct(SMAAEffect, _toConsumableArray(smaaProps));\n\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    var normalPass = new NormalPass(scene, camera);\n    var ssaoEffect = new SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    var bloomEffect = new BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: BlendFunction.SCREEN,\n      kernelSize: KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    var effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n\n    var effectPass = _construct(EffectPass, [camera].concat(_toConsumableArray(effectsArray)));\n\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  useEffect(function () {\n    return void composer.setSize(size.width, size.height);\n  }, [composer, size]);\n  return useFrame(function (_, delta) {\n    return composer.render(delta);\n  }, 1);\n}\n\nextend({\n  TextMeshImpl: TextMesh\n});\nvar Text = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: ref,\n    text: children\n  }, props));\n});\nvar v1 = new Vector3();\nvar v2 = new Vector3();\nvar v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  var widthHalf = size.width / 2;\n  var heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  var deltaCamObj = objectPos.sub(cameraPos);\n  var camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var vFOV = camera.fov * Math.PI / 180;\n    var dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var dist = objectPos.distanceTo(cameraPos);\n    var A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    var B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nvar HTML = React.forwardRef(function (_ref, ref) {\n  var _portal$current;\n\n  var children = _ref.children,\n      _ref$eps = _ref.eps,\n      eps = _ref$eps === void 0 ? 0.001 : _ref$eps,\n      style = _ref.style,\n      className = _ref.className,\n      prepend = _ref.prepend,\n      center = _ref.center,\n      fullscreen = _ref.fullscreen,\n      portal = _ref.portal,\n      scaleFactor = _ref.scaleFactor,\n      _ref$zIndexRange = _ref.zIndexRange,\n      zIndexRange = _ref$zIndexRange === void 0 ? [16777271, 0] : _ref$zIndexRange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  var _useThree9 = useThree(),\n      gl = _useThree9.gl,\n      scene = _useThree9.scene,\n      camera = _useThree9.camera,\n      size = _useThree9.size;\n\n  var _useState3 = useState(function () {\n    return document.createElement('div');\n  }),\n      _useState4 = _slicedToArray(_useState3, 1),\n      el = _useState4[0];\n\n  var group = useRef(null);\n  var old = useRef([0, 0]);\n  var target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(function () {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return function () {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  var styles = useMemo(function () {\n    return _extends({\n      position: 'absolute',\n      transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n    }, fullscreen && {\n      top: -size.height / 2,\n      left: -size.width / 2,\n      width: size.width,\n      height: size.height\n    }, {}, style);\n  }, [style, center, fullscreen, size]);\n  useEffect(function () {\n    return void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref,\n      style: styles,\n      className: className,\n      children: children\n    }), el);\n  });\n  useFrame(function () {\n    if (group.current) {\n      var vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        var scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nvar Shadow = forwardRef(function (_ref, ref) {\n  var _ref$fog = _ref.fog,\n      fog = _ref$fog === void 0 ? false : _ref$fog,\n      _ref$colorStop = _ref.colorStop,\n      colorStop = _ref$colorStop === void 0 ? 0.0 : _ref$colorStop,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'black' : _ref$color,\n      _ref$opacity = _ref.opacity,\n      opacity = _ref$opacity === void 0 ? 0.5 : _ref$opacity,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  var canvas = useMemo(function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    var context = canvas.getContext('2d');\n    var gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats(_ref3) {\n  var _ref3$showPanel = _ref3.showPanel,\n      showPanel = _ref3$showPanel === void 0 ? 0 : _ref3$showPanel;\n\n  var _useState5 = useState(function () {\n    return new StatsImpl();\n  }),\n      _useState6 = _slicedToArray(_useState5, 1),\n      stats = _useState6[0];\n\n  useEffect(function () {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    return function () {\n      return document.body.removeChild(stats.dom);\n    };\n  }, []);\n  return useFrame(function (state) {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\n\nextend({\n  SkyImpl: Sky$1\n});\nvar Sky = forwardRef(function (_ref, ref) {\n  var _ref$distance2 = _ref.distance,\n      distance = _ref$distance2 === void 0 ? 450000 : _ref$distance2,\n      _ref$sunPosition = _ref.sunPosition,\n      sunPosition = _ref$sunPosition === void 0 ? [0, 1, 0] : _ref$sunPosition,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  var scale = useMemo(function () {\n    return new Vector3().setScalar(distance);\n  }, [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\n\nfunction draco() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/draco-gltf/';\n  return function (loader) {\n    var dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nvar pcss = function pcss() {\n  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref4$frustrum = _ref4.frustrum,\n      frustrum = _ref4$frustrum === void 0 ? 3.75 : _ref4$frustrum,\n      _ref4$size = _ref4.size,\n      size = _ref4$size === void 0 ? 0.005 : _ref4$size,\n      _ref4$near = _ref4.near,\n      near = _ref4$near === void 0 ? 9.5 : _ref4$near,\n      _ref4$samples = _ref4.samples,\n      samples = _ref4$samples === void 0 ? 17 : _ref4$samples,\n      _ref4$rings = _ref4.rings,\n      rings = _ref4$rings === void 0 ? 11 : _ref4$rings;\n\n  return \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n};\n\nvar softShadows = function softShadows(props) {\n  var shader = ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  ShaderChunk.shadowmap_pars_fragment = shader;\n};\n\nvar _inverseMatrix = new Matrix4();\n\nvar _ray = new Ray();\n\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  var geometry = this.geometry;\n  var material = this.material;\n  var matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  var _useThree10 = useThree(),\n      mouse = _useThree10.mouse;\n\n  var _useState7 = useState(function () {\n    var raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof Camera ? camera : camera.current);\n      var rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  }),\n      _useState8 = _slicedToArray(_useState7, 1),\n      raycast = _useState8[0];\n\n  return raycast;\n}\n\nfunction useHelper(object3D, proto) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var helper = React.useRef();\n\n  var _useThree11 = useThree(),\n      scene = _useThree11.scene;\n\n  useEffect(function () {\n    if (proto && object3D.current) {\n      helper.current = _construct(proto, [object3D.current].concat(args));\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return function () {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  useFrame(function () {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nexport { Detailed, HTML, MapControls, OrbitControls, OrthographicCamera, PerspectiveCamera, PositionalAudio, Shadow, Sky, StandardEffects, Stats, Text, TrackballControls, TransformControls, draco, meshBounds, softShadows, useCamera, useHelper };","map":{"version":3,"sources":["C:/Users/scarleti/Desktop/Cyril/React/rigged - Copy/node_modules/drei/dist/index.js"],"names":["_extends","React","forwardRef","useRef","useEffect","useLayoutEffect","useState","useMemo","extend","useThree","useFrame","useUpdate","useLoader","applyProps","OrbitControls","OrbitControls$1","MapControls","MapControls$1","mergeRefs","TrackballControls","TrackballControls$1","_objectWithoutPropertiesLoose","TransformControls","TransformControls$1","AudioListener","AudioLoader","HalfFloatType","Vector3","PerspectiveCamera","PerspectiveCamera$1","OrthographicCamera","OrthographicCamera$1","Color","ShaderChunk","Matrix4","Ray","Sphere","Raycaster","Camera","SMAAImageLoader","EffectComposer","RenderPass","SMAAEffect","NormalPass","SSAOEffect","BlendFunction","BloomEffect","KernelSize","EffectPass","TextMesh","ReactDOM","StatsImpl","Sky","Sky$1","DRACOLoader","OrbitControlsImpl","props","enableDamping","ref","controls","camera","gl","invalidate","_controls$current","current","update","_controls$current2","addEventListener","_controls$current3","removeEventListener","createElement","args","domElement","MapControlsImpl","TrackballControlsImpl","TransformControlsImpl","_ref","children","group","attach","Fragment","Detailed","distances","lod","levels","length","forEach","object","index","push","distance","state","_lod$current","PositionalAudio","url","loop","sound","listener","buffer","_sound$current","_sound$current2","_sound$current3","_sound$current4","setBuffer","setRefDistance","setLoop","play","add","remove","makeDefault","setDefaultCamera","size","cameraRef","cam","aspect","width","height","updateProjectionMatrix","oldCam","left","right","top","bottom","StandardEffects","smaa","ao","bloom","edgeDetection","bloomOpacity","effects","scene","smaaProps","composer","frameBufferType","addPass","smaaEffect","colorEdgesMaterial","setEdgeDetectionThreshold","normalPass","ssaoEffect","renderTarget","texture","blendFunction","MULTIPLY","samples","rings","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","radius","scale","bias","bloomEffect","opacity","SCREEN","kernelSize","VERY_LARGE","luminanceThreshold","luminanceSmoothing","blendMode","value","effectsArray","effectPass","renderToScreen","setSize","_","delta","render","TextMeshImpl","Text","text","v1","v2","v3","calculatePosition","el","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","heightHalf","x","y","isObjectBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","Math","PI","objectScale","vFOV","fov","dist","distanceTo","tan","zoom","objectZIndex","zIndexRange","A","far","near","B","round","undefined","HTML","_portal$current","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","document","old","target","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","unmountComponentAtNode","styles","position","transform","abs","display","zIndex","Shadow","fog","colorStop","color","canvas","context","getContext","gradient","createRadialGradient","addColorStop","getStyle","fillStyle","fillRect","stop","transparent","Stats","showPanel","stats","body","dom","begin","end","SkyImpl","sunPosition","setScalar","draco","loader","dracoLoader","setDecoderPath","setDRACOLoader","pcss","frustrum","softShadows","shader","shadowmap_pars_fragment","replace","_inverseMatrix","_ray","_sphere","_vA","meshBounds","raycaster","intersects","geometry","material","boundingSphere","computeBoundingSphere","copy","applyMatrix4","ray","intersectsSphere","getInverse","boundingBox","intersectBox","origin","point","clone","useCamera","mouse","setFromCamera","rc","constructor","prototype","raycast","bind","useHelper","object3D","proto","helper"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport { AudioListener, AudioLoader, HalfFloatType, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, ShaderChunk, Matrix4, Ray, Sphere, Raycaster, Camera } from 'three';\nimport { SMAAImageLoader, EffectComposer, RenderPass, SMAAEffect, NormalPass, SSAOEffect, BlendFunction, BloomEffect, KernelSize, EffectPass } from 'postprocessing';\nimport { TextMesh } from 'troika-3d-text/dist/textmesh-standalone.umd';\nimport ReactDOM from 'react-dom';\nimport StatsImpl from 'stats.js';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\n\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nconst OrbitControls = forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  MapControlsImpl: MapControls$1\n});\nconst MapControls = forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nconst TrackballControls = forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\n\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nconst TransformControls = forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const controls = useRef();\n  const group = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useLayoutEffect(() => {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props)), /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n});\n\nconst Detailed = forwardRef((_ref, ref) => {\n  let {\n    children,\n    distances\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  const lod = useUpdate(lod => {\n    lod.levels.length = 0;\n    lod.children.forEach((object, index) => lod.levels.push({\n      object,\n      distance: distances[index]\n    }));\n  }, []);\n  useFrame(state => {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\n\nconst PositionalAudio = forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return () => void camera.remove(listener);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nconst PerspectiveCamera = forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nconst OrthographicCamera = forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => cam.updateProjectionMatrix(), [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nfunction StandardEffects({\n  smaa = true,\n  ao = true,\n  bloom = true,\n  edgeDetection = 0.1,\n  bloomOpacity = 1,\n  effects\n}) {\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const smaaProps = useLoader(SMAAImageLoader, '');\n  const composer = useMemo(() => {\n    const composer = new EffectComposer(gl, {\n      frameBufferType: HalfFloatType\n    });\n    composer.addPass(new RenderPass(scene, camera));\n    const smaaEffect = new SMAAEffect(...smaaProps);\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    const normalPass = new NormalPass(scene, camera);\n    const ssaoEffect = new SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    const bloomEffect = new BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: BlendFunction.SCREEN,\n      kernelSize: KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    let effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n    const effectPass = new EffectPass(camera, ...effectsArray);\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  useEffect(() => void composer.setSize(size.width, size.height), [composer, size]);\n  return useFrame((_, delta) => composer.render(delta), 1);\n}\n\nextend({\n  TextMeshImpl: TextMesh\n});\nconst Text = forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: ref,\n    text: children\n  }, props));\n});\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst HTML = React.forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, {}, style), [style, center, fullscreen, size]);\n  useEffect(() => void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\n\nconst Shadow = forwardRef((_ref, ref) => {\n  let {\n    fog = false,\n    colorStop = 0.0,\n    color = 'black',\n    opacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  const canvas = useMemo(() => {\n    let canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    let context = canvas.getContext('2d');\n    let gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats({\n  showPanel = 0\n}) {\n  const [stats] = useState(() => new StatsImpl());\n  useEffect(() => {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    return () => document.body.removeChild(stats.dom);\n  }, []);\n  return useFrame(state => {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\n\nextend({\n  SkyImpl: Sky$1\n});\nconst Sky = forwardRef((_ref, ref) => {\n  let {\n    distance = 450000,\n    sunPosition = [0, 1, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  const scale = useMemo(() => new Vector3().setScalar(distance), [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\n\nfunction draco(url = '/draco-gltf/') {\n  return loader => {\n    const dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nconst pcss = ({\n  frustrum = 3.75,\n  size = 0.005,\n  near = 9.5,\n  samples = 17,\n  rings = 11\n} = {}) => \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n\nconst softShadows = props => {\n  let shader = ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  ShaderChunk.shadowmap_pars_fragment = shader;\n};\n\nlet _inverseMatrix = new Matrix4();\n\nlet _ray = new Ray();\n\nlet _sphere = new Sphere();\n\nlet _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  let geometry = this.geometry;\n  let material = this.material;\n  let matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  const {\n    mouse\n  } = useThree();\n  const [raycast] = useState(() => {\n    let raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof Camera ? camera : camera.current);\n      const rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  });\n  return raycast;\n}\n\nfunction useHelper(object3D, proto, ...args) {\n  const helper = React.useRef();\n  const {\n    scene\n  } = useThree();\n  useEffect(() => {\n    if (proto && object3D.current) {\n      helper.current = new proto(object3D.current, ...args);\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return () => {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  useFrame(() => {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nexport { Detailed, HTML, MapControls, OrbitControls, OrthographicCamera, PerspectiveCamera, PositionalAudio, Shadow, Sky, StandardEffects, Stats, Text, TrackballControls, TransformControls, draco, meshBounds, softShadows, useCamera, useHelper };\n"]},"metadata":{},"sourceType":"module"}